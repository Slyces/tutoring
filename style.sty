\ProvidesPackage{style}[2018/07/14 My Style file .sty]

% ──────────────────────────────────────────────────────────────────────────── %
%                          Packages and dependencies                           %
% ──────────────────────────────────────────────────────────────────────────── %

%% Formatting
\RequirePackage{xcolor} % handling colors
\RequirePackage{multicol} % multiple columns side-by-side

\RequirePackage[most]{tcolorbox} % boxes and other frames
\RequirePackage[normalem]{ulem}  % crossing text

% Dynamic links
\RequirePackage{hyperref}
\RequirePackage{url}
\hypersetup{ linktoc=all, hidelinks}

% Titles formating
\usepackage{titlesec} % formatage des titres

% Arrays and matrices
\RequirePackage{booktabs,adjustbox} % sober tables
%\RequirePackage{arydshln}
\RequirePackage{array}
\RequirePackage{makecell} % carriage return inside a cell
\RequirePackage[outline]{contour}

%% Creating graphs and images
\usepackage[justification=centering]{caption}
\RequirePackage{textcomp}

\RequirePackage{tikz} % graphs and diagrams
\usetikzlibrary{
    positioning,
    decorations.pathreplacing,
    patterns,
    shapes, % geometrical shapes
    arrows, % shapes for arrows
    calc, % intermediary positions: ($(x)!0.5!(y)$)
    angles, % clean angles
    quotes, % for angles
}


%% Inserting images
\RequirePackage{graphicx}
\RequirePackage{float}
\RequirePackage{wrapfig} % having figures next to text

% Mathematics
\RequirePackage{mathtools} % aligning equations (among other things
\RequirePackage{amssymb}   % symbols (\geqslant, and others ...)
\RequirePackage{amsmath}
\RequirePackage{amsthm}    % theorems, definitions, lemmas, ...

% .... ?
\RequirePackage{microtype}

% ──────────────────────────────────────────────────────────────────────────── %
%                              Color Definitions                               %
% ──────────────────────────────────────────────────────────────────────────── %
\definecolor{blue}{rgb}{0.36,0.54,0.66}
%\definecolor{babyblue}{rgb}{0.54,0.81,0.94}
%\definecolor{beaublue}{rgb}{0.74,0.83,0.9}
%\definecolor{bluebell}{rgb}{0.64,0.64,0.82}
%\definecolor{brilliantlavender}{rgb}{0.96,0.73,1.0}
%\definecolor{bubbles}{rgb}{0.91,1.0,1.0}
%\definecolor{cadetgrey}{rgb}{0.57,0.64,0.69} \definecolor{cambridgeblue}{rgb}{0.64,0.76,0.68}
%\definecolor{cinereous}{rgb}{0.6,0.51,0.48}
\definecolor{red}{rgb}{0.8,0.36,0.36}
%\definecolor{indianyellow}{rgb}{0.89,0.66,0.34}
\definecolor{green}{rgb}{0.07,0.53,0.03}

% ──────────────────────────────────────────────────────────────────────────── %
%                           Document wide parameters                           %
% ──────────────────────────────────────────────────────────────────────────── %

% Default folder for images and tikz graphs
\graphicspath{ {images/} {tikz/} }

% Default folder for tex code
\makeatletter
\def\input@path{ {tikz/} }
\makeatother

% ──────────────────────────────────────────────────────────────────────────── %
%                         Modifying default behaviours                         %
% ──────────────────────────────────────────────────────────────────────────── %
\let\oldforall\forall
\renewcommand{\forall}{\oldforall~}

\let\oldexists\exists
\renewcommand{\exists}{\oldexists~}


% ──────────────────────────────────────────────────────────────────────────── %
%                          Frames and « color-boxes »                          %
% ──────────────────────────────────────────────────────────────────────────── %
\newtcolorbox{picframe}{
    colback=white, hbox, enhanced, right=0pt, left=0pt, bottom=0pt, top=0pt
}



\newtcolorbox{codebox}{
   %colback=grey!2!white,
   %colframe=black!25!white,
   %boxrule=1px,
   %fuzzy halo=2pt with grey!25!white,
   %bottom=5pt, top=5pt,
   %grow to left by = -0.5cm,
   %grow to right by =-0.5cm,
   %breakable
}

\newtcolorbox{equationbox}{
   %colback=grey!2!white,
   %colframe=black!25!white,
   %boxrule=1px,
   %fuzzy halo=2pt with grey!25!white,
   %bottom=5pt, top=5pt,
   %grow to left by = -0.5cm,
   %grow to right by =-0.5cm,
   %breakable
}

\newtcolorbox{doublecodebox}[1][]{
   %sidebyside,
   %title=#1,
   %colback=grey!2!white,
   %colframe=black!25!white,
   %boxrule=1px,
   %fuzzy halo=2pt with grey!25!white,
   %bottom=5pt, top=5pt,
   %grow to left by = -0.5cm,
   %grow to right by =-0.5cm
}

% ──────────────────────────────────────────────────────────────────────────── %
%                              Titles formatting                               %
% ──────────────────────────────────────────────────────────────────────────── %

% Command for coloring the main title
\newcommand{\tcol}[1]{\textcolor{blue}{#1}}

% Sections titles are underlined
\titleformat{\section}[block]%
    {\Large\bfseries}{}{0pt}%
    {\thesection}[\vspace{2pt}\titlerule]

\titleformat*{\subsection}{\Large\bfseries}
\titleformat*{\subsubsection}{\normalfont\bfseries\itshape}
% -------------------------------------------------------------
% Titles numbering

\renewcommand{\thesection}%
    {\Roman{section}%
        \ifnum\value{section}=0%
        \else~--~%
        \fi%
    }
\renewcommand{\thesubsection}{}%{\arabic{subsection}.}
\renewcommand{\thesubsubsection}{}%{\Roman{section}--\arabic{subsection}.\arabic{subsubsection}.}

% ──────────────────────────────────────────────────────────────────────────── %
%                                Environnements                                %
% ──────────────────────────────────────────────────────────────────────────── %

% Insertion of source code

% ...
\newenvironment{code}{\vspace{8pt}\begin{codebox}}{\end{codebox}\vspace{8pt}}

% Mathematics

\newenvironment{boxequation}{
    \vspace{8pt}
    \begin{equationbox}
}{
    \end{equationbox}
    \vspace{8pt}
}

% ──────────────────────────────────────────────────────────────────────────── %
%                                   Commands                                   %
% ──────────────────────────────────────────────────────────────────────────── %

% Keywords: a way to emphasise important keywords
\newcommand{\kw}[1]{\textcolor{green}{#1}}
\newcommand{\lefteq}{\tikz[baseline=0.8ex]{
        \draw[blue, pattern color=white, pattern=north east lines] (0,0) rectangle (2,0.5);
}}
\newcommand{\righteq}{\tikz[baseline=0.8ex]{
        \draw[red, pattern color=white, pattern=north east lines] (0,0) rectangle (2,0.5);
}}

% Steps
\newcommand{\steps}{\textsc{steps}}
\newcommand{\defpoint}[2]{\rnode[l]{#1}{#2}}
\newcommand{\steparrow}[2]{\pcbar[angle=180,nodesep=3pt,linearc=3pt,linecolor=blue]{->}(#1)(#2)}

% Comment: right aligned, italics
\newcommand{\ecomment}[1]{\vspace{-2em}\begin{flushright}\textit{(#1)}\end{flushright}\vspace{-0.8em}}

% Grey separator
\newcommand{\greysep}{\textcolor{grey}{\rule{\textwidth}{1pt}}}

% New operations argmin et argmax in the math environment
\DeclareMathOperator*{\argmax}{arg\,max}
\DeclareMathOperator*{\argmin}{arg\,min}
